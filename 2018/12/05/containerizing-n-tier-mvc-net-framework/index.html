<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"perspectiveLeftIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Microservice Architecture and Containerization using docker are the latest buzzword in the software industry. But, Many people including me in the software industry developing big monolithic enterpris">
<meta name="keywords" content=".Net,Docker">
<meta property="og:type" content="article">
<meta property="og:title" content=" Containerizing N-Tier MVC .Net Framework Application with Docker">
<meta property="og:url" content="https://jeevasubburaj.com/2018/12/05/containerizing-n-tier-mvc-net-framework/index.html">
<meta property="og:site_name" content="Jeeva Subburaj - Programmer, Blogger">
<meta property="og:description" content="Microservice Architecture and Containerization using docker are the latest buzzword in the software industry. But, Many people including me in the software industry developing big monolithic enterpris">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://4.bp.blogspot.com/-ZUK-MZx0Kes/XAf7Cs4YGZI/AAAAAAAHA-s/O_Tr_UuqCwcuO_apmJX6af08u6qrqaaKgCLcBGAs/s640/title_image.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-DoPZevXf3z8/XAdLbGU-PVI/AAAAAAAHA9M/omXHkpHJnaUzMDvZA5dGgx2uPw7IThPCgCEwYBhgL/s640/Container_Orchestrator_Support.png">
<meta property="og:image" content="https://3.bp.blogspot.com/-FPhnFeD4qTA/XAdLdVtPAcI/AAAAAAAHA-k/yZtpmgKRy7U-GxzOGVr342WSgoUMi2zsgCEwYBhgL/s1600/docker_compose.png">
<meta property="og:image" content="https://2.bp.blogspot.com/-j5JKJhFFg4Q/XAdLbG3nTBI/AAAAAAAHA-k/xeC0Uy_Pd0YyyAGqpDdviQe6NG0gVfMpgCEwYBhgL/s1600/Database_Folder.png">
<meta property="og:image" content="https://3.bp.blogspot.com/-G-Wojx8H0pk/XAdLbI4Hj6I/AAAAAAAHA-Q/gnkaqSm7bAMuSTzUFmf6PaaRqNB_1rlOgCEwYBhgL/s1600/app_docker_file.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-swgbIl8gJUY/XAdLh-1d3qI/AAAAAAAHA-g/dOLNc2_XOs42k6wwfxwzp_CQskJ81o7AACEwYBhgL/s640/publish_to_folder.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-ehAAVTExwRw/XAdLib3UdWI/AAAAAAAHA-k/WF0himVujUM1lSgfSeht5vatinECm5qNgCEwYBhgL/s1600/web.config_changes.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-3opv5bbwsoQ/XAdLf6x7XQI/AAAAAAAHA-k/Pj_gVF8xVwIoLaDPssDrTflYJ8HRYQrjgCEwYBhgL/s1600/docker_images.png">
<meta property="og:image" content="https://1.bp.blogspot.com/-kBeQzlgaZ0U/XAdLdzAjy4I/AAAAAAAHA-Y/Vk3QV_A-aqgDCN3oosC5CHNQgscjVmRPwCEwYBhgL/s1600/docker_compose_build.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-NAQ6Y28croI/XAdLghA9mBI/AAAAAAAHA-k/YveUjZdpY1wRUEJwIIXANk1lnw3XtzM0gCEwYBhgL/s1600/docker_images_v2.png">
<meta property="og:image" content="https://1.bp.blogspot.com/-9bunjA-Q8u0/XAdLe6yPcNI/AAAAAAAHA-U/CcWZL1zzwsIYem153iltuiUrfKH5g75TQCEwYBhgL/s1600/docker_compose_up.png">
<meta property="og:image" content="https://3.bp.blogspot.com/-UbA0BQH9wHg/XAdLc8jdFyI/AAAAAAAHA-k/NsOre6wIqNsVMkMhlspzXzSXLpkf02mSwCEwYBhgL/s1600/demo_home_page.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-DNoyeDy3060/XAdLbl4IhbI/AAAAAAAHA-k/RfJ3vhtej3Q-zHiHtTKZsgcvLJO10ghowCEwYBhgL/s1600/create_employee_1.png">
<meta property="og:image" content="https://3.bp.blogspot.com/-qkBfNLC4bGA/XAdLhBvyPII/AAAAAAAHA-Y/e_-oNXwOrdgXsIqkKWsUo_hk_wLEqmNuwCEwYBhgL/s1600/employee_list.png">
<meta property="og:image" content="https://3.bp.blogspot.com/-iCFpVVlhUrg/XAdLb3dfRLI/AAAAAAAHA-Q/mW5gjMp6HE4ErlrYn7rcqzwJMn5zNNWbACEwYBhgL/s1600/db_login.png">
<meta property="og:image" content="https://2.bp.blogspot.com/-NyqKj_2UCK8/XAdLcuVgy1I/AAAAAAAHA-k/nUcLIBrjODEJRWliQpf0tIDkMOlmRJquQCEwYBhgL/s1600/db_result.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-Ron6heO0tHQ/XAdLeaBkIqI/AAAAAAAHA-g/0VPXXbbSPYkAVDeso1AezkdL-4-ChIEhQCEwYBhgL/s1600/docker_compose_down.png">
<meta property="og:image" content="https://4.bp.blogspot.com/-YAyX0oi0ggI/XAdLfQQ-9iI/AAAAAAAHA-U/kzv35O8uFMsqKddjJwsTR9upbpDpYhQegCEwYBhgL/s1600/docker_compose_up_2.png">
<meta property="og:image" content="https://1.bp.blogspot.com/-JqDpToikUj4/XAdLhZXDBsI/AAAAAAAHA-c/CAwSeultlTIo_x8R-rBSC_zt_YDin6ngQCEwYBhgL/s1600/employee_list_no_result.png">
<meta property="og:updated_time" content="2019-03-15T17:32:25.548Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Containerizing N-Tier MVC .Net Framework Application with Docker">
<meta name="twitter:description" content="Microservice Architecture and Containerization using docker are the latest buzzword in the software industry. But, Many people including me in the software industry developing big monolithic enterpris">
<meta name="twitter:image" content="https://4.bp.blogspot.com/-ZUK-MZx0Kes/XAf7Cs4YGZI/AAAAAAAHA-s/O_Tr_UuqCwcuO_apmJX6af08u6qrqaaKgCLcBGAs/s640/title_image.png">



  <link rel="alternate" href="/atom.xml" title="Jeeva Subburaj - Programmer, Blogger" type="application/atom+xml">




  <link rel="canonical" href="https://jeevasubburaj.com/2018/12/05/containerizing-n-tier-mvc-net-framework/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title> Containerizing N-Tier MVC .Net Framework Application with Docker | Jeeva Subburaj - Programmer, Blogger</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jeeva Subburaj - Programmer, Blogger</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jeevasubburaj.com/2018/12/05/containerizing-n-tier-mvc-net-framework/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeeva Subburaj">
      <meta itemprop="description" content="Programmer, Blogger">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jeeva Subburaj - Programmer, Blogger">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline"> Containerizing N-Tier MVC .Net Framework Application with Docker

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-12-05 14:29:00" itemprop="dateCreated datePublished" datetime="2018-12-05T14:29:00-05:00">2018-12-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-15 13:32:25" itemprop="dateModified" datetime="2019-03-15T13:32:25-04:00">2019-03-15</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/12/05/containerizing-n-tier-mvc-net-framework/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/05/containerizing-n-tier-mvc-net-framework/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="https://4.bp.blogspot.com/-ZUK-MZx0Kes/XAf7Cs4YGZI/AAAAAAAHA-s/O_Tr_UuqCwcuO_apmJX6af08u6qrqaaKgCLcBGAs/s640/title_image.png" alt><br>Microservice Architecture and Containerization using docker are the latest buzzword in the software industry. But, Many people including me in the software industry developing big monolithic enterprise applications using .Net Framework for many years have very limited scope of applying these concepts into existing applications. Because, its not easy to break enterprise monolithic application into micro service architecture without redesigning the application. Also, .Net Core framework would be the de facto choice for micro service architecture because it supports cross platform so it can be hosted in linux container or windows container. As of today, Windows Docker container do not support GUI application such as winforms, wpf etc.. However, we can still consider modernizing .Net Framework monolithic application by packaging into docker image for automated end to end testing or security testing.  </p>
<a id="more"></a>
<p>In this article, i will explain how to containerize a simple N-Tier CRUD MVC application using docker. We will create a separate app server and database server container images and deploy and run the simple N-Tier MVC application. If you are new to docker, i would recommend first to read <a href="https://twitter.com/sahilmalik" target="_blank" rel="noopener">Sahil Malik</a> article about <a href="https://www.codemag.com/Article/1811021/Docker-for-Developers" target="_blank" rel="noopener">docker for developers</a> and watch the awesome pluralsight course of <a href="https://pluralsight.pxf.io/c/1197078/424552/7490?u=https%3A%2F%2Fwww.pluralsight.com%2Fcourses%2Fmodernizing-dotnet-framework-apps-docker" target="_blank" rel="noopener">Modernizing .NET Apps with Docker</a> by Elton Stoneman.  </p>
<h3 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h3><p>I took the <a href="https://code.msdn.microsoft.com/Applying-N-Tier-Deployment-56b6210c" target="_blank" rel="noopener">N-Tier Application on ASP.NET MVC - A Complete Solution</a> from MSDN Code web site that runs on full .Net Framework. This sample application does the basic CRUD operation for maintaining Employees data using Model-View-Controller Patter with Repository Pattern and N-Tiers Deployment Architecture Pattern. We will modernize this application by containerizing into docker image. This application will have separate database and application server instances. The database server will be based Docker version of <a href="https://hub.docker.com/r/microsoft/mssql-server-windows-developer/" target="_blank" rel="noopener">SQL Server Developer Edition</a> and application server is based on <a href="https://hub.docker.com/r/microsoft/aspnet/" target="_blank" rel="noopener">microsoft/aspnet:latest</a> docker image. Every time, when new container instance is created, new database will be created and all the data that were created in prior container instance will be destroyed when container instance is stopped which perfectly works for automated testing scenarios.  </p>
<h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h3><p>Now, i am going to explain about <strong>docker-compose</strong> file to orchestrate how to build and deploy .Net Framework application into docker container. Visual Studio provides the default container orchestration support for .Net Web Projects. You can add it by right click on the web project and select Container Orchestration Support as below.  </p>
<p><a href="https://4.bp.blogspot.com/-DoPZevXf3z8/XAdLbGU-PVI/AAAAAAAHA9M/omXHkpHJnaUzMDvZA5dGgx2uPw7IThPCgCEwYBhgL/s1600/Container_Orchestrator_Support.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-DoPZevXf3z8/XAdLbGU-PVI/AAAAAAAHA9M/omXHkpHJnaUzMDvZA5dGgx2uPw7IThPCgCEwYBhgL/s640/Container_Orchestrator_Support.png" alt></a></p>
<p><a href="https://3.bp.blogspot.com/-FPhnFeD4qTA/XAdLdVtPAcI/AAAAAAAHA-k/yZtpmgKRy7U-GxzOGVr342WSgoUMi2zsgCEwYBhgL/s1600/docker_compose.png" target="_blank" rel="noopener"><img src="https://3.bp.blogspot.com/-FPhnFeD4qTA/XAdLdVtPAcI/AAAAAAAHA-k/yZtpmgKRy7U-GxzOGVr342WSgoUMi2zsgCEwYBhgL/s1600/docker_compose.png" alt></a></p>
<p>However, i am not using the built-in container orchestration support feature for creating docker-compose file. I created it manually from scratch using visual studio code editor.  </p>
<h4 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h4><p>In the root folder of the project, create a new file called docker-compose.yml with the below code. I used visual studio code as my editor and it has great support for yaml file with intellisense.<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  docker_ntierdemo_app:</span>    </span><br><span class="line"><span class="attr">    image:</span> <span class="string">jeevasubburaj/dockerntierdemo_app:v1</span></span><br><span class="line"><span class="attr">    build:</span></span><br><span class="line"><span class="attr">      context:</span> <span class="string">./NtierMvc/bin/Release/Publish</span>          </span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">docker_ntierdemo_db</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">$&#123;APP_UUID&#125;</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">$&#123;APP_UUID&#125;</span></span><br><span class="line"><span class="attr">    networks:</span> </span><br><span class="line"><span class="attr">      docker_ntierdemo-net:</span>        </span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.16</span><span class="number">.238</span><span class="number">.20</span>              </span><br><span class="line"><span class="attr">  docker_ntierdemo_db:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">jeevasubburaj/dockerntierdemo_db:v1</span>   </span><br><span class="line"><span class="attr">    build:</span>      </span><br><span class="line"><span class="attr">      context:</span> <span class="string">./Database</span> </span><br><span class="line"><span class="attr">    ports:</span> </span><br><span class="line"><span class="bullet">      -</span> <span class="string">"14333:1433"</span></span><br><span class="line"><span class="attr">    env_file:</span> <span class="string">db_dev.env</span>   </span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">$&#123;DB_UUID&#125;</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">$&#123;DB_UUID&#125;</span>             </span><br><span class="line"><span class="attr">    networks:</span> </span><br><span class="line"><span class="attr">      docker_ntierdemo-net:</span>             </span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.16</span><span class="number">.238</span><span class="number">.21</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  docker_ntierdemo-net:</span>       </span><br><span class="line"><span class="attr">    ipam:</span></span><br><span class="line"><span class="attr">      driver:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">      config:</span></span><br><span class="line"><span class="attr">        - subnet:</span> <span class="number">172.16</span><span class="number">.238</span><span class="number">.0</span><span class="string">/24</span></span><br></pre></td></tr></table></figure></p>
<p>Lets talk about each line in the above docker-compose file to understand what is going on. Before we take a deep dive into that, i would recommend you to read the official <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">docker-compose guide</a> from docker website.</p>
<pre><code>version: &apos;3&apos;
</code></pre><p>This is the version of the docker-compose format that we use in this example.</p>
<pre><code>services:
 docker_ntierdemo_app: 
 ....
 docker_ntierdemo_db:
</code></pre><p>Services definition contains configuration applied to each container started for that service. In our example, we will be creating application and db server services.  </p>
<p>Before we go into services in detail, we will discuss about how to create environment variables in docker-compose using .env file and custom env file. we are going to create some custom environment variable such as hostname, sql server login password etc to access it from docker-compose file.  </p>
<p>by default, you can set your environment variables using a  <strong>.env</strong>  file which docker-compose automatically looks for. if you want to create a custom environment file, you can also do that and reference that file inside the docker-compose file. In this example, i used both. In addition to that, you can also create the environment variable inside the docker-compose file without creating environment file.   </p>
<h3 id="env-file"><a href="#env-file" class="headerlink" title=".env file"></a>.env file</h3><pre><code>APP_UUID=Demo_App_Server
DB_UUID=Demo_Db_Server
</code></pre><p>i have created the custom host name for both app and db server and i will be using these variables inside the docker-compose file. The same value is also configured in web.config so that app server will be connecting to db server.  </p>
<h3 id="db-dev-env"><a href="#db-dev-env" class="headerlink" title="db_dev.env"></a>db_dev.env</h3><pre><code>SA_PASSWORD=P@ssw0rd
ACCEPT_EULA=Y
</code></pre><p>In this custom environment file, i have defined the default sa account password and accept EULA flag for the sql server to start inside the container.    </p>
<h3 id="Database-Server-Services"><a href="#Database-Server-Services" class="headerlink" title="Database Server Services"></a>Database Server Services</h3><pre><code>image: jeevasubburaj/dockerntierdemo_db:v1   
    build:      
      context: ./Database 
    ports: 
      - &quot;14333:1433&quot;
    env_file: db_dev.env   
    hostname: ${DB_UUID}
    container_name: ${DB_UUID}
</code></pre><p>In the first line, i defined the name of the image with version number.  </p>
<p>Before we jump into build section, let us look at other references in that section. I mapped the default sql port 1433 from container into 14333 on host port using ports configuration so that you can connect the database from your host server with servername as <strong>localhost,14333</strong>. This step is optional only.  </p>
<p>we have also defined the <strong>hostname</strong> and <strong>container_name</strong> using environment variable. This will be needed to configure the database server name in our web.config, before we deploy the application in to the container.  </p>
<p>Build configurations are applied at docker build time. The context configuration defines the path to a directory containing the DockerFile. I created a new folder <strong>Database</strong> and placed the <strong>DockerFile</strong> and <strong>Database_Setup.sql</strong> file and pointing the context to that folder. When we build the docker image using docker-compose, it runs the DockerFile inside the Database Folder and build the database image. By Default, it will look for the file with name of DockerFile. if you want to create a custom DockerFile Name, you have to add dockerfile configuration to specify the custom docker file name.  </p>
<p><a href="https://2.bp.blogspot.com/-j5JKJhFFg4Q/XAdLbG3nTBI/AAAAAAAHA-k/xeC0Uy_Pd0YyyAGqpDdviQe6NG0gVfMpgCEwYBhgL/s1600/Database_Folder.png" target="_blank" rel="noopener"><img src="https://2.bp.blogspot.com/-j5JKJhFFg4Q/XAdLbG3nTBI/AAAAAAAHA-k/xeC0Uy_Pd0YyyAGqpDdviQe6NG0gVfMpgCEwYBhgL/s1600/Database_Folder.png" alt></a></p>
<h3 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h3><pre><code>FROM microsoft/mssql-server-windows-developer:latest
COPY ./Database_Setup.sql .
RUN sqlcmd -i Database_Setup.sql
</code></pre><p>This dockerfile gets the base image from sql server developer edition and copy the Database_Setup.sql into the image and execute the sql using sqlcmd command which will create the database and the tables defined in the sql file.</p>
<h3 id="Database-Setup-sql"><a href="#Database-Setup-sql" class="headerlink" title="Database_Setup.sql"></a>Database_Setup.sql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> [<span class="keyword">master</span>] </span><br><span class="line"><span class="keyword">GO</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [NtierMvcDB] </span><br><span class="line"><span class="keyword">GO</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">USE</span> [NtierMvcDB] </span><br><span class="line"><span class="keyword">GO</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SCHEMA</span> [HR] </span><br><span class="line"><span class="keyword">GO</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [HR].[Employees] </span><br><span class="line">( </span><br><span class="line">    [<span class="keyword">Id</span>] [<span class="built_in">int</span>] <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    [<span class="keyword">Name</span>] [<span class="keyword">nvarchar</span>](<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    [Age] [<span class="built_in">int</span>] <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    [HiringDate] [datetime] <span class="literal">NULL</span>, </span><br><span class="line">    [GrossSalary] [<span class="built_in">decimal</span>](<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    [ModifiedDate] [datetime] <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line"> <span class="keyword">CONSTRAINT</span> [PK_Employees] PRIMARY <span class="keyword">KEY</span> CLUSTERED ([<span class="keyword">Id</span>] <span class="keyword">ASC</span>) <span class="keyword">ON</span> [PRIMARY] </span><br><span class="line">) <span class="keyword">ON</span> [PRIMARY] </span><br><span class="line"><span class="keyword">GO</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> [HR].[Employees] <span class="keyword">ADD</span>  <span class="keyword">CONSTRAINT</span> [DF_Employees_ModifiedDate]  <span class="keyword">DEFAULT</span> (<span class="keyword">GETDATE</span>()) <span class="keyword">FOR</span> [ModifiedDate] </span><br><span class="line"><span class="keyword">GO</span></span><br></pre></td></tr></table></figure>
<h4 id="Networks"><a href="#Networks" class="headerlink" title="Networks"></a>Networks</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  docker_ntierdemo-net:</span>       </span><br><span class="line"><span class="attr">    ipam:</span></span><br><span class="line"><span class="attr">      driver:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">      config:</span></span><br><span class="line"><span class="attr">        - subnet:</span> <span class="number">172.16</span><span class="number">.238</span><span class="number">.0</span><span class="string">/24</span></span><br></pre></td></tr></table></figure>
<p>In the networks configuration section, we can define any custom network properties that are needed. if we don’t define any networks configuration, docker will create a default network with bridge mode enabled. In the above example, i created custom network with default subnet range so that i can configure the custom ip address for my app and db server. This will be useful for scenarios like when you have some enterprise application with licensing tool installed based on certain device parameter such as mac address, ip address so that you will have the container instances created with same ip address, mac address every time it created with out installing the license for every instance.  </p>
<h3 id="App-Server-services"><a href="#App-Server-services" class="headerlink" title="App Server services"></a>App Server services</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">docker_ntierdemo_app:</span>    </span><br><span class="line"><span class="attr">    image:</span> <span class="string">jeevasubburaj/dockerntierdemo_app:v1</span></span><br><span class="line"><span class="attr">    build:</span></span><br><span class="line"><span class="attr">      context:</span> <span class="string">./NtierMvc/bin/Release/Publish</span>          </span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">docker_ntierdemo_db</span></span><br><span class="line"><span class="attr">    hostname:</span> <span class="string">$&#123;APP_UUID&#125;</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">$&#123;APP_UUID&#125;</span></span><br><span class="line"><span class="attr">    networks:</span> </span><br><span class="line"><span class="attr">      docker_ntierdemo-net:</span>        </span><br><span class="line"><span class="attr">        ipv4_address:</span> <span class="number">172.16</span><span class="number">.238</span><span class="number">.20</span></span><br></pre></td></tr></table></figure>
<p>In the App Server Services Configuration, we define the name of the image and in the build context, configure the published folder output path. We will create a publish profile from visual studio to deploy the build output in the above mentioned folder along with the <strong>DockerFile</strong>. The DockerFile must be added in the project and set the <strong>build action as content</strong> so that it will also get deployed to publish folder.  </p>
<p><a href="https://3.bp.blogspot.com/-G-Wojx8H0pk/XAdLbI4Hj6I/AAAAAAAHA-Q/gnkaqSm7bAMuSTzUFmf6PaaRqNB_1rlOgCEwYBhgL/s1600/app_docker_file.png" target="_blank" rel="noopener"><img src="https://3.bp.blogspot.com/-G-Wojx8H0pk/XAdLbI4Hj6I/AAAAAAAHA-Q/gnkaqSm7bAMuSTzUFmf6PaaRqNB_1rlOgCEwYBhgL/s1600/app_docker_file.png" alt></a></p>
<h3 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h3><pre><code>FROM microsoft/aspnet:latest
COPY . /inetpub/wwwroot/
</code></pre><p>In this dockerfile, we are taking the base image of microsoft aspnet docker image and copy the build output directly into wwwroot folder inside the container image. we can also put the build output into different folder and create IIS web site using powershell command.  </p>
<p><strong>depends_on</strong> configuration defines the dependency between services. In this example, app server is dependent on database server so when we run the service , docker will start the database service first and then it will start the app service based on the order we defined.  </p>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>We are now done with the orchestration configuration of deploying our application into docker container using docker compose, we can now build the image and bring up the container instances to test it. Before we start, we must create the publish profile to deploy the build output into publish folder. Make sure dockerfile in the web project has build action as content.  </p>
<p><a href="https://4.bp.blogspot.com/-swgbIl8gJUY/XAdLh-1d3qI/AAAAAAAHA-g/dOLNc2_XOs42k6wwfxwzp_CQskJ81o7AACEwYBhgL/s1600/publish_to_folder.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-swgbIl8gJUY/XAdLh-1d3qI/AAAAAAAHA-g/dOLNc2_XOs42k6wwfxwzp_CQskJ81o7AACEwYBhgL/s640/publish_to_folder.png" alt></a></p>
<p>Also, change the database server name matching with db server name defined in env file in <strong>web.config</strong> file.  </p>
<p><a href="https://4.bp.blogspot.com/-ehAAVTExwRw/XAdLib3UdWI/AAAAAAAHA-k/WF0himVujUM1lSgfSeht5vatinECm5qNgCEwYBhgL/s1600/web.config_changes.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-ehAAVTExwRw/XAdLib3UdWI/AAAAAAAHA-k/WF0himVujUM1lSgfSeht5vatinECm5qNgCEwYBhgL/s1600/web.config_changes.png" alt></a></p>
<p>Launch the powershell window from the root folder and run the <strong>docker images</strong> command to show the list of images. I have already downloaded aspnet and sql server images from docker hub.  </p>
<p><a href="https://4.bp.blogspot.com/-3opv5bbwsoQ/XAdLf6x7XQI/AAAAAAAHA-k/Pj_gVF8xVwIoLaDPssDrTflYJ8HRYQrjgCEwYBhgL/s1600/docker_images.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-3opv5bbwsoQ/XAdLf6x7XQI/AAAAAAAHA-k/Pj_gVF8xVwIoLaDPssDrTflYJ8HRYQrjgCEwYBhgL/s1600/docker_images.png" alt></a></p>
<p>Lets build the docker image using <strong>docker-compose build</strong> command. This will first create the database image using base sql server developer edison and create the database and tables based on the SQL we provided and then it will create app server based on aspnet framework docker image and copy the build output from publish folder and put it into wwwroot folder inside the container image.  </p>
<p><a href="https://1.bp.blogspot.com/-kBeQzlgaZ0U/XAdLdzAjy4I/AAAAAAAHA-Y/Vk3QV_A-aqgDCN3oosC5CHNQgscjVmRPwCEwYBhgL/s1600/docker_compose_build.png" target="_blank" rel="noopener"><img src="https://1.bp.blogspot.com/-kBeQzlgaZ0U/XAdLdzAjy4I/AAAAAAAHA-Y/Vk3QV_A-aqgDCN3oosC5CHNQgscjVmRPwCEwYBhgL/s1600/docker_compose_build.png" alt></a></p>
<p>Now, that we have successfully created the docker images, we can verify that by running <strong>docker images</strong> command.  </p>
<p><a href="https://4.bp.blogspot.com/-NAQ6Y28croI/XAdLghA9mBI/AAAAAAAHA-k/YveUjZdpY1wRUEJwIIXANk1lnw3XtzM0gCEwYBhgL/s1600/docker_images_v2.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-NAQ6Y28croI/XAdLghA9mBI/AAAAAAAHA-k/YveUjZdpY1wRUEJwIIXANk1lnw3XtzM0gCEwYBhgL/s1600/docker_images_v2.png" alt></a></p>
<p>Let us now bring up new container instance from our image using <strong>docker-compose up</strong> command. This command will create a database container instance first and then app server instance and attach it with the database server. Once the container instances are we can verify the instance by testing our application from the browser.  </p>
<p><a href="https://1.bp.blogspot.com/-9bunjA-Q8u0/XAdLe6yPcNI/AAAAAAAHA-U/CcWZL1zzwsIYem153iltuiUrfKH5g75TQCEwYBhgL/s1600/docker_compose_up.png" target="_blank" rel="noopener"><img src="https://1.bp.blogspot.com/-9bunjA-Q8u0/XAdLe6yPcNI/AAAAAAAHA-U/CcWZL1zzwsIYem153iltuiUrfKH5g75TQCEwYBhgL/s1600/docker_compose_up.png" alt></a></p>
<p>Verify the application by launching the browser and put the <strong>ip address of app server</strong> container instance.  </p>
<p><a href="https://3.bp.blogspot.com/-UbA0BQH9wHg/XAdLc8jdFyI/AAAAAAAHA-k/NsOre6wIqNsVMkMhlspzXzSXLpkf02mSwCEwYBhgL/s1600/demo_home_page.png" target="_blank" rel="noopener"><img src="https://3.bp.blogspot.com/-UbA0BQH9wHg/XAdLc8jdFyI/AAAAAAAHA-k/NsOre6wIqNsVMkMhlspzXzSXLpkf02mSwCEwYBhgL/s1600/demo_home_page.png" alt></a></p>
<p>Now, home page is up and running, let try adding new employee into our table.  </p>
<p><a href="https://4.bp.blogspot.com/-DNoyeDy3060/XAdLbl4IhbI/AAAAAAAHA-k/RfJ3vhtej3Q-zHiHtTKZsgcvLJO10ghowCEwYBhgL/s1600/create_employee_1.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-DNoyeDy3060/XAdLbl4IhbI/AAAAAAAHA-k/RfJ3vhtej3Q-zHiHtTKZsgcvLJO10ghowCEwYBhgL/s1600/create_employee_1.png" alt></a></p>
<p><a href="https://3.bp.blogspot.com/-qkBfNLC4bGA/XAdLhBvyPII/AAAAAAAHA-Y/e_-oNXwOrdgXsIqkKWsUo_hk_wLEqmNuwCEwYBhgL/s1600/employee_list.png" target="_blank" rel="noopener"><img src="https://3.bp.blogspot.com/-qkBfNLC4bGA/XAdLhBvyPII/AAAAAAAHA-Y/e_-oNXwOrdgXsIqkKWsUo_hk_wLEqmNuwCEwYBhgL/s1600/employee_list.png" alt></a></p>
<p>Lets also verify the data in sql server by connecting with <strong>localhost:14333</strong> port from host.  </p>
<p><a href="https://3.bp.blogspot.com/-iCFpVVlhUrg/XAdLb3dfRLI/AAAAAAAHA-Q/mW5gjMp6HE4ErlrYn7rcqzwJMn5zNNWbACEwYBhgL/s1600/db_login.png" target="_blank" rel="noopener"><img src="https://3.bp.blogspot.com/-iCFpVVlhUrg/XAdLb3dfRLI/AAAAAAAHA-Q/mW5gjMp6HE4ErlrYn7rcqzwJMn5zNNWbACEwYBhgL/s1600/db_login.png" alt></a></p>
<p><a href="https://2.bp.blogspot.com/-NyqKj_2UCK8/XAdLcuVgy1I/AAAAAAAHA-k/nUcLIBrjODEJRWliQpf0tIDkMOlmRJquQCEwYBhgL/s1600/db_result.png" target="_blank" rel="noopener"><img src="https://2.bp.blogspot.com/-NyqKj_2UCK8/XAdLcuVgy1I/AAAAAAAHA-k/nUcLIBrjODEJRWliQpf0tIDkMOlmRJquQCEwYBhgL/s1600/db_result.png" alt></a></p>
<p>Great. If we stop the container now, all the data that we created will be gone and it will start from clean slate for next instance. Let us test that by running <strong>docker-compose down</strong> command. you can also verify if all the running instances are down by running <strong>docker ps</strong> command.  </p>
<p><a href="https://4.bp.blogspot.com/-Ron6heO0tHQ/XAdLeaBkIqI/AAAAAAAHA-g/0VPXXbbSPYkAVDeso1AezkdL-4-ChIEhQCEwYBhgL/s1600/docker_compose_down.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-Ron6heO0tHQ/XAdLeaBkIqI/AAAAAAAHA-g/0VPXXbbSPYkAVDeso1AezkdL-4-ChIEhQCEwYBhgL/s1600/docker_compose_down.png" alt></a></p>
<p>If we create a new instance now, it will start from clean slate and the employee record that we created should not be exists.<br>Let us run d<strong>ocker-compose up</strong> command to bring up the new instance.  </p>
<p><a href="https://4.bp.blogspot.com/-YAyX0oi0ggI/XAdLfQQ-9iI/AAAAAAAHA-U/kzv35O8uFMsqKddjJwsTR9upbpDpYhQegCEwYBhgL/s1600/docker_compose_up_2.png" target="_blank" rel="noopener"><img src="https://4.bp.blogspot.com/-YAyX0oi0ggI/XAdLfQQ-9iI/AAAAAAAHA-U/kzv35O8uFMsqKddjJwsTR9upbpDpYhQegCEwYBhgL/s1600/docker_compose_up_2.png" alt></a></p>
<p><a href="https://1.bp.blogspot.com/-JqDpToikUj4/XAdLhZXDBsI/AAAAAAAHA-c/CAwSeultlTIo_x8R-rBSC_zt_YDin6ngQCEwYBhgL/s1600/employee_list_no_result.png" target="_blank" rel="noopener"><img src="https://1.bp.blogspot.com/-JqDpToikUj4/XAdLhZXDBsI/AAAAAAAHA-c/CAwSeultlTIo_x8R-rBSC_zt_YDin6ngQCEwYBhgL/s1600/employee_list_no_result.png" alt></a></p>
<p>We have successfully deployed the complete .N-Tier CRUD MVC application into docker container. As i mentioned earlier, we can use the containerization for automated end to end or security testing for monolithic application. We can also integrate with CI / CD pipeline to run all the test scenarios before merging the pull request from the feature branch.  </p>
<h3 id="Additional-Notes"><a href="#Additional-Notes" class="headerlink" title="Additional Notes"></a>Additional Notes</h3><p>In the above example, we did not store the state changes as part of the container instances. All the changes are gone when the container instance is stopped. However, if we want to store the state of the application and database changes, docker provides the functionality of creating volumes which will mount the folder from host to docker container so that all the state changes will be persisted. This will be useful in the scenario like automated testing to store the results.  </p>
<p>In order to create volume in docker, we should use volumes configuration section in docker-compose file. In the example below, i created the directory called DB on my host server and put the MDF and LDF database file inside the folder and then mount that folder to container.</p>
<pre><code>volumes: 
    - ./DB/:c:\db
</code></pre><p>Next step is to attach the database instead of creating database by adding <strong>attach_dbs</strong> command in env file. This will create a database called NtierMvcDB and attach the existing MDF and LDF file into that every time when the container instance is created. Also, this will store all the DB state changes even after the container is stopped. When we initiate the new container instance, it will show the data from the previous instance as well.</p>
<pre><code>SA_PASSWORD=P@ssw0rd
ACCEPT_EULA=Y
attach_dbs=[{&apos;dbName&apos;:&apos;NtierMvcDB&apos;,&apos;dbFiles&apos;:[&apos;C:\\\\DB\\\\NtierMvcDB.mdf&apos;,&apos;C:\\\\DB\\\\NtierMvcDB.ldf&apos;]}]
</code></pre><p>Some of monolithic core application engine may run on windows service. The good thing with docker on windows, it supports windows service since there is no GUI involved. If you want to install your application engine windows service as part of docker image build and run the windows service, use the below powershell commands in DockerFile.</p>
<pre><code>RUN powershell new-service -Name &quot;AppEngineService&quot; -StartupType Automatic -BinaryPathName &quot;C:\app\bin\AppEngineService.exe&quot;

RUN powershell start-service -Name &quot;AppEngineService&quot;
</code></pre><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>I hope this article helps you understand how to containerize .net framework monolithic application. Docker containerization is not just only for breaking monolithic application into micro service architecture. It can also be considered to modernize monolithic application packaging into docker image and ship it very frequently for various scenarios like automated end to end testing, security testing.  </p>
<p>I have uploaded the entire source code in my  <a href="https://github.com/vavjeeva/DockerNTierMVCAppDemo" target="_blank" rel="noopener">github</a> repository.  </p>
<p>Happy Coding!!</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Net/" rel="tag"># .Net</a>
          
            <a href="/tags/Docker/" rel="tag"># Docker</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/12/real-time-cricket-score-chrome/" rel="next" title="Real Time Cricket Score Chrome Extension using Azure Functions and SignalR">
                <i class="fa fa-chevron-left"></i> Real Time Cricket Score Chrome Extension using Azure Functions and SignalR
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/24/c-hidden-gems-discards-variable/" rel="prev" title="C# Hidden Gems – Discards Variable ( _ )">
                C# Hidden Gems – Discards Variable ( _ ) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jeeva Subburaj">
            
              <p class="site-author-name" itemprop="name">Jeeva Subburaj</p>
              <div class="site-description motion-element" itemprop="description">Programmer, Blogger</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/vavjeeva" title="GitHub &rarr; https://github.com/vavjeeva" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:vavjeeva@gmail.com" title="E-Mail &rarr; mailto:vavjeeva@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://twitter.com/vavjeeva" title="Twitter &rarr; https://twitter.com/vavjeeva" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://stackoverflow.com/users/79442/jeeva-subburaj" title="StackOverflow &rarr; https://stackoverflow.com/users/79442/jeeva-subburaj" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeeva Subburaj</span>

  

  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://jeevasubburaj.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "https://jeevasubburaj.com/2018/12/05/containerizing-n-tier-mvc-net-framework/";
    this.page.identifier = "2018/12/05/containerizing-n-tier-mvc-net-framework/";
    this.page.title = ' Containerizing N-Tier MVC .Net Framework Application with Docker';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://jeevasubburaj.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    $(function() {
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll.disqus_scroll', function() {
          // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('.disqus_scroll');
            loadComments();
          }
        });
      }
    });
  
</script>





  


  




  

  

  

  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script>


</body>
</html>
