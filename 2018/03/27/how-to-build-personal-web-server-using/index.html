<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"perspectiveLeftIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="I have a various streaming box (Apple TV, Roku, Fire TV, Nexus Player) because i prefer to watch video tutorials on TV rather than watching in laptop. However, we don’t have app for all the sites that">
<meta name="keywords" content="NodeJS,Raspberry PI">
<meta property="og:type" content="article">
<meta property="og:title" content="How to build Personal Web API Server using Raspberry PI and NodeJs">
<meta property="og:url" content="https://jeevasubburaj.com/2018/03/27/how-to-build-personal-web-server-using/index.html">
<meta property="og:site_name" content="Jeeva Subburaj - Programmer, Blogger">
<meta property="og:description" content="I have a various streaming box (Apple TV, Roku, Fire TV, Nexus Player) because i prefer to watch video tutorials on TV rather than watching in laptop. However, we don’t have app for all the sites that">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-03-15T17:32:52.816Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to build Personal Web API Server using Raspberry PI and NodeJs">
<meta name="twitter:description" content="I have a various streaming box (Apple TV, Roku, Fire TV, Nexus Player) because i prefer to watch video tutorials on TV rather than watching in laptop. However, we don’t have app for all the sites that">



  <link rel="alternate" href="/atom.xml" title="Jeeva Subburaj - Programmer, Blogger" type="application/atom+xml">




  <link rel="canonical" href="https://jeevasubburaj.com/2018/03/27/how-to-build-personal-web-server-using/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>How to build Personal Web API Server using Raspberry PI and NodeJs | Jeeva Subburaj - Programmer, Blogger</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jeeva Subburaj - Programmer, Blogger</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jeevasubburaj.com/2018/03/27/how-to-build-personal-web-server-using/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeeva Subburaj">
      <meta itemprop="description" content="Programmer, Blogger">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jeeva Subburaj - Programmer, Blogger">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">How to build Personal Web API Server using Raspberry PI and NodeJs

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-03-27 10:38:00" itemprop="dateCreated datePublished" datetime="2018-03-27T10:38:00-04:00">2018-03-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-15 13:32:52" itemprop="dateModified" datetime="2019-03-15T13:32:52-04:00">2019-03-15</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/03/27/how-to-build-personal-web-server-using/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/03/27/how-to-build-personal-web-server-using/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>I have a various streaming box (Apple TV, Roku, Fire TV, Nexus Player) because i prefer to watch video tutorials on TV rather than watching in laptop. However, we don’t have app for all the sites that provides video tutorials. For example, <a href="https://channel9.msdn.com/" target="_blank" rel="noopener">MSDN channel9</a> dont have app for any streaming boxes. So, i decided to use roku <a href="https://sourceforge.net/p/rokusdkexamples/code/HEAD/tree/trunk/rokusdkexamples-code/videoplayer/" target="_blank" rel="noopener">sample video player app</a> to play channel 9 videos on my roku. This app expects the video content defined in certain XML format.So, I just have to build the web APIs to return the XML output dynamically. I also prefer not to host the Web APIs on the internet. I just want to host it in my home network. So, i need a web server that will be always on so, decided to use my existing Raspberry PI 3 as a web server.  </p>
<a id="more"></a>
<p>I initially thought of using .Net Core on Windows IOT but then later decided to use Raspian OS and NodeJS becuase i wanted to try NodeJS with some real world application.  </p>
<p>Setting up Raspian OS on Raspberry PI was pretty simple. I just followed this excellent <a href="http://thisdavej.com/beginners-guide-to-installing-node-js-on-a-raspberry-pi/" target="_blank" rel="noopener">article</a> on how to setup Raspian on Raspberry PI. Also, configured the remote connection and shared the work folder to deploy the files so i no longer need my Raspberry PI connected to my TV. I just placed the raspberry PI along with my other stream boxes and connected through my laptop using remote desktop.  </p>
<p>I started the Node JS Web API with the following Node Packages to parse the channel 9 feeds.  </p>
<ul>
<li><a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener">Express</a></li>
<li><a href="https://www.npmjs.com/package/cheerio" target="_blank" rel="noopener">Cheerio</a></li>
<li><a href="https://www.npmjs.com/package/xmlbuilder" target="_blank" rel="noopener">XMLBuilder</a></li>
</ul>
<p>Express is one of the most famous nodejs web application framework to create Web APIs quick and easy. Cheerio is used for parsing the DOM elements. XMLBuilder is used for construct the xml output in easy way.  </p>
<p>To start with, i created the web server with routing as follows  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)  </span><br><span class="line"> , app = express()  </span><br><span class="line"> , server = <span class="built_in">require</span>(<span class="string">'http'</span>).createServer(app)  </span><br><span class="line"> , path = <span class="built_in">require</span>(<span class="string">'path'</span>)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parser = <span class="built_in">require</span>(<span class="string">'./lib/parser'</span>);  </span><br><span class="line"></span><br><span class="line">app.set(<span class="string">'port'</span>, <span class="number">4567</span>);  </span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">'public'</span>)));  </span><br><span class="line"></span><br><span class="line"><span class="comment">//Routes  </span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;  </span><br><span class="line"> res.sendFile(__dirname + <span class="string">'/public/index.html'</span>);  </span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/Ch9'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;  </span><br><span class="line"> parser.Ch9(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;  </span><br><span class="line">  res.set(<span class="string">'Content-Type'</span>, <span class="string">'text/xml'</span>)  </span><br><span class="line">  res.send(<span class="number">200</span>, result)  </span><br><span class="line"> &#125;)  </span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/Ch9/:topic/List'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;  </span><br><span class="line"> <span class="keyword">var</span> topic = req.params.topic;  </span><br><span class="line"> parser.Ch9List(topic, <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;  </span><br><span class="line">  res.set(<span class="string">'Content-Type'</span>, <span class="string">'text/xml'</span>)  </span><br><span class="line">  res.send(<span class="number">200</span>, result)  </span><br><span class="line"> &#125;);  </span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/Ch9/:topic/:title/View'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;  </span><br><span class="line"> <span class="keyword">var</span> topic = req.params.topic;  </span><br><span class="line"> <span class="keyword">var</span> title = req.params.title;  </span><br><span class="line"> parser.Ch9View(topic, title, <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;  </span><br><span class="line">  res.set(<span class="string">'Content-Type'</span>, <span class="string">'text/xml'</span>)  </span><br><span class="line">  res.send(<span class="number">200</span>, result)  </span><br><span class="line"> &#125;);  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>i created the parser library class and added the following code to parse the channel 9 RSS content to fetch the video URLs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> topicLists = [<span class="string">"Shows"</span>, <span class="string">"Events"</span>, <span class="string">"Series"</span>, <span class="string">"Blogs"</span>];  </span><br><span class="line"> <span class="keyword">const</span> ch9BaseURL = <span class="string">"http://channel9.msdn.com/Browse/"</span>;  </span><br><span class="line"> exports.Ch9 = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;  </span><br><span class="line">   <span class="keyword">var</span> xml = builder.create(<span class="string">'categories'</span>);  </span><br><span class="line">   <span class="keyword">var</span> cIndex;  </span><br><span class="line">   <span class="keyword">for</span> (cIndex <span class="keyword">in</span> topicLists) &#123;  </span><br><span class="line">     <span class="keyword">var</span> category = xml.ele(<span class="string">"category"</span>);  </span><br><span class="line">     category.att(<span class="string">"title"</span>, topicLists[cIndex]);  </span><br><span class="line">     category.att(<span class="string">"description"</span>, topicLists[cIndex]);  </span><br><span class="line">   </span><br><span class="line">     <span class="keyword">var</span> catLeaf = category.ele(<span class="string">"categoryLeaf"</span>);  </span><br><span class="line">     catLeaf.att(<span class="string">"title"</span>, topicLists[cIndex]);  </span><br><span class="line">     catLeaf.att(<span class="string">"description"</span>, topicLists[cIndex]);  </span><br><span class="line">     catLeaf.att(<span class="string">"feed"</span>, appBaseURL + <span class="string">"Ch9/"</span> + topicLists[cIndex] + <span class="string">"/List/"</span>);  </span><br><span class="line">   &#125;  </span><br><span class="line">   xml.end(&#123; <span class="attr">pretty</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">   callback(xml.toString());  </span><br><span class="line"> &#125;  </span><br><span class="line">   </span><br><span class="line"> exports.Ch9List = <span class="function"><span class="keyword">function</span> (<span class="params">topic, callback</span>) </span>&#123;  </span><br><span class="line">   <span class="keyword">var</span> xml;  </span><br><span class="line">   request(ch9BaseURL + topic + <span class="string">'/rss?sort=recent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, html</span>) </span>&#123;  </span><br><span class="line">     <span class="keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="number">200</span>) &#123;  </span><br><span class="line">       <span class="keyword">var</span> $ = cheerio.load(html, &#123; <span class="attr">ignoreWhitespace</span>: <span class="literal">true</span>, <span class="attr">xmlMode</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">       xml = builder.create(<span class="string">'categories'</span>);  </span><br><span class="line">       <span class="keyword">var</span> currIndex = <span class="number">0</span>;  </span><br><span class="line">       $(<span class="string">'item'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">i, element</span>) </span>&#123;  </span><br><span class="line">         <span class="keyword">var</span> category = xml.ele(<span class="string">"category"</span>);  </span><br><span class="line">         category.att(<span class="string">"title"</span>, $(element).find(<span class="string">'title'</span>).text());  </span><br><span class="line">         category.att(<span class="string">"description"</span>, $(element).find(<span class="string">'description'</span>).text());  </span><br><span class="line">   </span><br><span class="line">         <span class="keyword">var</span> catLeaf = category.ele(<span class="string">"categoryLeaf"</span>);  </span><br><span class="line">         catLeaf.att(<span class="string">"title"</span>, $(element).find(<span class="string">'title'</span>).text());  </span><br><span class="line">         catLeaf.att(<span class="string">"description"</span>, $(element).find(<span class="string">'description'</span>).text());  </span><br><span class="line">         catLeaf.att(<span class="string">"feed"</span>, appBaseURL + <span class="string">"Ch9/"</span> + topic + <span class="string">"/"</span> + <span class="built_in">encodeURIComponent</span>($(element).find(<span class="string">'title'</span>).text()) + <span class="string">"/View/"</span>);  </span><br><span class="line">         currIndex++;  </span><br><span class="line">       &#125;);  </span><br><span class="line">   </span><br><span class="line">       xml.end(&#123; <span class="attr">pretty</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">       callback(xml.toString());  </span><br><span class="line">     &#125;  </span><br><span class="line">   &#125;);  </span><br><span class="line"> &#125;  </span><br><span class="line">   </span><br><span class="line"> exports.Ch9View = <span class="function"><span class="keyword">function</span> (<span class="params">topic, title, callback</span>) </span>&#123;  </span><br><span class="line">   <span class="keyword">var</span> xml;  </span><br><span class="line">   request(ch9BaseURL + topic + <span class="string">'/rss?sort=recent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, html</span>) </span>&#123;  </span><br><span class="line">     <span class="keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="number">200</span>) &#123;  </span><br><span class="line">       <span class="keyword">var</span> $ = cheerio.load(html, &#123; <span class="attr">ignoreWhitespace</span>: <span class="literal">true</span>, <span class="attr">xmlMode</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">       <span class="keyword">var</span> curElement = $(<span class="string">'item'</span>).filter(<span class="function"><span class="keyword">function</span> (<span class="params">i, el</span>) </span>&#123;  </span><br><span class="line">         <span class="keyword">return</span> $(<span class="keyword">this</span>).find(<span class="string">'title'</span>).text() === title;  </span><br><span class="line">       &#125;);  </span><br><span class="line">       <span class="keyword">var</span> feedURL = $(curElement).find(<span class="string">'c9\\:feed'</span>).text();  </span><br><span class="line">       <span class="keyword">if</span> (!feedURL)  </span><br><span class="line">         feedURL = $(curElement).find(<span class="string">'c9\\:feed'</span>).text() + <span class="string">"/Rss"</span>;  </span><br><span class="line">   </span><br><span class="line">       request(feedURL, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, html</span>) </span>&#123;  </span><br><span class="line">         <span class="keyword">var</span> $ = cheerio.load(html, &#123; <span class="attr">ignoreWhitespace</span>: <span class="literal">true</span>, <span class="attr">xmlMode</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">         xml = builder.create(<span class="string">'feed'</span>);  </span><br><span class="line">         <span class="keyword">var</span> loopIndex = <span class="number">0</span>;  </span><br><span class="line">         $(<span class="string">'item'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">i, element</span>) </span>&#123;  </span><br><span class="line">           <span class="keyword">var</span> url = $(element).find(<span class="string">'media\\:content'</span>).filter(<span class="function"><span class="keyword">function</span> (<span class="params">i, el</span>) </span>&#123;  </span><br><span class="line">             <span class="keyword">return</span> $(<span class="keyword">this</span>).attr(<span class="string">'url'</span>).includes(<span class="string">"_high"</span>);  </span><br><span class="line">           &#125;).attr(<span class="string">"url"</span>);  </span><br><span class="line">   </span><br><span class="line">           <span class="keyword">var</span> item = xml.ele(<span class="string">'item'</span>);  </span><br><span class="line">           item.att(<span class="string">'sdImg'</span>, $(<span class="keyword">this</span>).children(<span class="string">'media\\:thumbnail'</span>).attr(<span class="string">'url'</span>));  </span><br><span class="line">           item.att(<span class="string">'hdImg'</span>, $(<span class="keyword">this</span>).children(<span class="string">'media\\:thumbnail'</span>).attr(<span class="string">'url'</span>));  </span><br><span class="line">           item.att(<span class="string">'thumbnailURL'</span>, $(<span class="keyword">this</span>).children(<span class="string">'media\\:thumbnail'</span>).attr(<span class="string">'url'</span>));  </span><br><span class="line">           item.ele(<span class="string">'title'</span>, $(<span class="keyword">this</span>).children(<span class="string">'title'</span>).text());  </span><br><span class="line">           item.ele(<span class="string">'contentId'</span>, loopIndex);  </span><br><span class="line">           item.ele(<span class="string">'streamFormat'</span>, <span class="string">'mp4'</span>);  </span><br><span class="line">           <span class="keyword">var</span> media = item.ele(<span class="string">'media'</span>);  </span><br><span class="line">           media.ele(<span class="string">'streamUrl'</span>, url);  </span><br><span class="line">           media.ele(<span class="string">'thumbnailURL'</span>, $(<span class="keyword">this</span>).children(<span class="string">'media\\:thumbnail'</span>).attr(<span class="string">'url'</span>));  </span><br><span class="line">           loopIndex++;  </span><br><span class="line">         &#125;);  </span><br><span class="line">         xml.end(&#123; <span class="attr">pretty</span>: <span class="literal">true</span> &#125;);  </span><br><span class="line">         callback(xml.toString());  </span><br><span class="line">       &#125;);  </span><br><span class="line">     &#125;  </span><br><span class="line">   &#125;);  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>Thats it. We have just implemented the web API using NodeJS with just few lines of code. if i run my application using <a href="http://localhost:4567/ch9" target="_blank" rel="noopener">http://localhost:4567/ch9</a>, it responds back with xml output.  </p>
<p>The deployment is super easy too. Just copy the folder excluding Node_Modules folder. You dont have to deploy the node_modules folder. You can run the NPM Update command to get the node_modules folder from PI Server after deploying it to save some deployment time.  </p>
<p>To run the App Server, just open the terminal from Raspian and run using the following command Node APP.js and your personal web server is ready to serve.  </p>
<p>I have modified the UrlCategoryFeed in categoryFeed.brs in the roku app before i deploy it. In order to deploy the roku dev app, just follow the <a href="https://sdkdocs.roku.com/display/sdkdoc/Loading+and+Running+Your+Application" target="_blank" rel="noopener">roku official guide</a> . Make sure You enable the development mode in roku before deploying it.  </p>
<p>Update : Roku recently updated their video channel sample app and the new app can be found <a href="https://github.com/rokudev/videoplayer-channel" target="_blank" rel="noopener">here</a>.</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/NodeJS/" rel="tag"># NodeJS</a>
          
            <a href="/tags/Raspberry-PI/" rel="tag"># Raspberry PI</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/05/net-hidden-gems-webdebugconfig-and/" rel="prev" title=".Net Hidden Gems - Web.Debug.Config and Web.Release.Config">
                .Net Hidden Gems - Web.Debug.Config and Web.Release.Config <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jeeva Subburaj">
            
              <p class="site-author-name" itemprop="name">Jeeva Subburaj</p>
              <div class="site-description motion-element" itemprop="description">Programmer, Blogger</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/vavjeeva" title="GitHub &rarr; https://github.com/vavjeeva" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:vavjeeva@gmail.com" title="E-Mail &rarr; mailto:vavjeeva@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://twitter.com/vavjeeva" title="Twitter &rarr; https://twitter.com/vavjeeva" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://stackoverflow.com/users/79442/jeeva-subburaj" title="StackOverflow &rarr; https://stackoverflow.com/users/79442/jeeva-subburaj" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
	  
	  
		<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
		<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
		<div class="widget-wrap">			
			<div id="myCanvasContainer" class="widget tagcloud">
				<canvas width="250" height="250" id="resCanvas" style="width=100%">
					<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net/">.Net</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Core/">.Net Core</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Asp-Net-Core/">Asp.Net Core</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Azure/">Azure</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AzureFunctions/">AzureFunctions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CognitiveService/">CognitiveService</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HiddenGems/">HiddenGems</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/">HttpClient</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/">Kotlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/">NodeJS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/">Performance</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Raspberry-PI/">Raspberry PI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-Server/">SQL Server</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SignalR/">SignalR</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tips/">Tips</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xamarin/">Xamarin</a><span class="tag-list-count">1</span></li></ul>
				</canvas>
			</div>
		</div>
		

      	  	  
    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeeva Subburaj</span>

  

  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://jeevasubburaj.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "https://jeevasubburaj.com/2018/03/27/how-to-build-personal-web-server-using/";
    this.page.identifier = "2018/03/27/how-to-build-personal-web-server-using/";
    this.page.title = 'How to build Personal Web API Server using Raspberry PI and NodeJs';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://jeevasubburaj.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    $(function() {
      var offsetTop = $('#comments').offset().top - $(window).height();
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        loadComments();
      } else {
        $(window).on('scroll.disqus_scroll', function() {
          // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = $('#comments').offset().top - $(window).height();
          var scrollTop = $(window).scrollTop();

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            $(window).off('.disqus_scroll');
            loadComments();
          }
        });
      }
    });
  
</script>





  


  




  

  

  

  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script>


</body>
</html>
